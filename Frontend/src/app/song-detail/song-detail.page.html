<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>üéµ Canci√≥n</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="song-detail">
    <!-- Imagen del √°lbum -->
    <div class="album-container">
      <img
        #albumImage
        [src]="song?.album.images[0]?.url"
        alt="Portada del √°lbum"
        class="album-image"
      />
    </div>

    <!-- Informaci√≥n de la canci√≥n -->
    <div class="song-info">
      <h1>{{ song?.name }}</h1>
      <h3>{{ artistNames }}</h3>
      <p class="album-info">
        <strong>√Ålbum:</strong> {{ song?.album.name }} <br />
        <strong>Lanzamiento:</strong> {{ song?.album.release_date }}
      </p>
      <p class="duration">
        <strong>Duraci√≥n:</strong> {{ formatDuration(song?.duration_ms) }}
      </p>
    </div>

    <!-- Botones de acci√≥n -->
    <div class="action-buttons">
      <ion-button expand="block" color="primary" (click)="addToPlaylist()">
        ‚ûï Agregar a Playlist
      </ion-button>
      <ion-button expand="block" color="secondary">
        ‚¨á Descargar
      </ion-button>
    </div>

    <!-- Reproductor de vista previa -->
    <div class="preview-player" *ngIf="song?.preview_url; else noPreview">
      <audio #audioPlayer controls>
        <source [src]="song.preview_url" type="audio/mpeg" />
        Tu navegador no soporta el elemento de audio.
      </audio>
    </div>

    <ng-template #noPreview>
      <p class="no-preview">No hay vista previa disponible para esta canci√≥n.</p>
    </ng-template>
  </div>
</ion-content>